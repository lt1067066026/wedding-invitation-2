require("../../common/manifest.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([5],{G88d:function(t,e,s){"use strict";var n=s("bV25");e.a={name:"Greet",data:function(){return{userList:[],openId:"",userInfo:""}},onShow:function(){this.getUserList()},methods:{sendGreet:function(t){var e=this;"getUserInfo:ok"===t.target.errMsg&&wx.getUserInfo({success:function(t){e.userInfo=t.userInfo,e.getOpenId()}})},addUser:function(){var t=this;wx.cloud.database().collection("user").add({data:{user:t.userInfo}}).then(function(e){t.getUserList()})},getOpenId:function(){var t=this;wx.cloud.callFunction({name:"user",data:{}}).then(function(e){t.openId=e.result.openid,t.getIsExist()})},getIsExist:function(){var t=this;wx.cloud.database().collection("user").where({_openid:t.openId}).get().then(function(e){0===e.data.length?t.addUser():n.a.showToast("您已经送过祝福了~")})},getUserList:function(){var t=this;wx.cloud.callFunction({name:"userList",data:{}}).then(function(e){t.userList=e.result.data.reverse()})}},onShareAppMessage:function(t){return{title:"徐凯和陈慧的婚礼邀请函",path:"/pages/index/main",imageUrl:"../../static/images/share.jpg"}}}},PcdN:function(t,e){},"Yh/J":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("5nAL"),a=s.n(n),r=s("zPDm");new a.a(r.a).$mount()},vts3:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"greet"},[s("image",{staticClass:"head",attrs:{src:"../../static/images/heart-animation.gif"}}),t._v(" "),s("scroll-view",{staticClass:"box",attrs:{"scroll-y":""}},t._l(t.userList,function(e,n){return s("div",{key:n,staticClass:"item"},[s("image",{attrs:{src:e.user.avatarUrl}}),t._v(" "),s("p",[t._v(t._s(e.user.nickName))])],1)})),t._v(" "),s("p",{staticClass:"count"},[t._v("已收到"+t._s(t.userList.length)+"位好友送来的祝福")]),t._v(" "),s("div",{staticClass:"bottom"},[s("button",{staticClass:"left",attrs:{lang:"zh_CN","open-type":"getUserInfo",eventid:"0"},on:{getuserinfo:t.sendGreet}},[t._v("送上祝福")]),t._v(" "),s("button",{staticClass:"right",attrs:{"open-type":"share"}},[t._v("分享喜悦")])],1)],1)},staticRenderFns:[]};e.a=n},zPDm:function(t,e,s){"use strict";var n=s("G88d"),a=s("vts3");var r=function(t){s("PcdN")},i=s("ybqe")(n.a,a.a,r,"data-v-102bf4f2",null);e.a=i.exports}},["Yh/J"]);